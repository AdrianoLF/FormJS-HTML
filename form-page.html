<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="./assets/styles.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/simple-line-icons/2.4.1/css/simple-line-icons.min.css"
        rel="stylesheet">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"></script>
    <script
        src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"></script>
    <title>Formulário de registro</title>
</head>

<body>
    <!-- BOOTSTRAP : https://epicbootstrap.com/snippets/registration -->
    <div class="registration-form">
        <form method="post">

            <div class="form-icon">
                <span><i class="icon icon-user"></i></span>
            </div>

            <div class="form-group">
                <input type="text" class="form-control item" id="username" placeholder="Nome" required maxlength="50">
            </div>

            <div class="form-group">
                <input type="password" class="form-control item" id="password" placeholder="Senha" required
                    maxlength="30" minlength="5">
            </div>

            <div class="form-group">
                <input type="password" class="form-control item" id="confirm_password" placeholder="Confirmar senha"
                    required maxlength="30">
            </div>

            <div class="form-group">
                <input type="email" class="form-control item" id="email" placeholder="Email" required maxlength="80">
            </div>

            <div class="form-group">
                <input type="text" class="form-control item" id="phone-number" placeholder="Número de telefone" required
                    minlength="13">
            </div>
            
            <div class="form-group date-div">
                <div>
                    <label>Data de aniversário</label>
                </div>
                <input type="date" id="date-picker" required min="1901-01-02" max="2017-12-31">
            </div>

            <div class="form-group">
                <input type="text" class="form-control item" id="document-cnpj-cpf" placeholder="CPF/CNPJ" required
                    class="form-group" minlength="14">
            </div>

            <div class="form-group">
                <input type="submit" class="btn btn-block create-account" value="Criar conta">
            </div>


        </form>

        <div class="social-media">
            <h5>Visite nossas redes sociais</h5>
            <div class="social-icons">
                <a class="icon-flip-flop" href="https://www.flipfloplab.com.br/"></a>
                <a class="icon-flip-flop" href="https://www.flipfloplab.com.br/"></a>
                <a class="icon-flip-flop" href="https://www.flipfloplab.com.br/"></a>
                <a class="icon-flip-flop" href="https://www.flipfloplab.com.br/"></a>
            </div>
        </div>
    </div>
    </div>


</body>
<script type="text/javascript" src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
<script type="text/javascript"
    src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.15/jquery.mask.min.js"></script>

<!-- ? Valida se as senhas são iguais -->
<script>
    // Máscaras dos inputs
    $('#phone-number').mask('(99) 999999999'); // TELEFONE

    $('#username').mask('A', {     // NOME - só aceita letras
        translation: {
            A: {
                pattern: /^[A-Za-záàâãéèêíïóôõöúçñÁÀÂÃÉÈÍÏÓÔÕÖÚÇÑ'\s]+$/g,
                recursive: true
            },
        },
    });

    var options = {     // DOCUMENTO CPF/CNPJ
        onKeyPress: function (item, ev, el, op) {
            const docMasks = ['000.000.000-000', '00.000.000/0000-00'];
            $('#document-cnpj-cpf').mask((item.length > 14) ? docMasks[1] : docMasks[0], op);
        }
    }
    $('#document-cnpj-cpf').length > 11 ? $('#document-cnpj-cpf').mask('00.000.000/0000-00', options) : $('#document-cnpj-cpf').mask('000.000.000-00#', options);

    function validateInput(condition, main_element, validityText) {
        if (condition) return main_element.setCustomValidity(validityText);
        main_element.setCustomValidity('');
    }

    // Validando se as senhas são iguais
    let password = document.getElementById("password"), confirm_password = document.getElementById("confirm_password");
    const validatePassword = () => validateInput((password.value != confirm_password.value), confirm_password, "As senhas devem ser iguais")
    password.onchange = validatePassword;
    confirm_password.onkeyup = validatePassword;

    // Validando quantidade de índices do Documento
    const doc = document.getElementById("document-cnpj-cpf");
    const validateDocument = () => validateInput((doc.value.length != 14 && doc.value.length != 18), doc, "O documento deve estar no formato correto");
    doc.onkeyup = validateDocument;

    // Validando quantidade de índices do telefone
    const telephone = document.getElementById("phone-number");
    const validateTelephone = () => validateInput((telephone.value.length < 12), telephone, "Digite o número de telefone completo");
    telephone.onkeyup = validateTelephone;
</script>


<script>
</script>

</html>